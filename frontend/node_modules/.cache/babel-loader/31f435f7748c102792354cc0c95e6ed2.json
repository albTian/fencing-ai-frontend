{"ast":null,"code":"import _slicedToArray from \"/Users/alberttian/f21/playground/frontend/fencing-ai-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\n/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { MaxPoolWithArgmax } from '@tensorflow/tfjs-core';\nimport { backend_util, util } from '@tensorflow/tfjs-core';\nimport { maxPoolWithArgmaxImpl } from './MaxPoolWithArgmax_impl';\nexport var maxPoolWithArgmaxConfig = {\n  kernelName: MaxPoolWithArgmax,\n  backendName: 'webgl',\n  kernelFunc: function kernelFunc(_ref) {\n    var inputs = _ref.inputs,\n        attrs = _ref.attrs,\n        backend = _ref.backend;\n    var x = inputs.x;\n    var filterSize = attrs.filterSize,\n        strides = attrs.strides,\n        pad = attrs.pad,\n        includeBatchInIndex = attrs.includeBatchInIndex;\n    var webglBackend = backend;\n    util.assert(x.shape.length === 4, function () {\n      return \"Error in maxPool: input must be rank 4 but got rank \".concat(x.shape.length, \".\");\n    });\n    var dilations = [1, 1];\n    util.assert(backend_util.eitherStridesOrDilationsAreOne(strides, dilations), function () {\n      return 'Error in maxPool: Either strides or dilations must be 1. ' + \"Got strides \".concat(strides, \" and dilations '\").concat(dilations, \"'\");\n    });\n    var convInfo = backend_util.computePool2DInfo(x.shape, filterSize, strides, dilations, pad);\n\n    var _maxPoolWithArgmaxImp = maxPoolWithArgmaxImpl(x, includeBatchInIndex, convInfo, webglBackend),\n        _maxPoolWithArgmaxImp2 = _slicedToArray(_maxPoolWithArgmaxImp, 2),\n        result = _maxPoolWithArgmaxImp2[0],\n        indexes = _maxPoolWithArgmaxImp2[1];\n\n    return [result, indexes];\n  }\n};","map":{"version":3,"sources":["../../src/kernels/MaxPoolWithArgmax.ts"],"names":[],"mappings":";;AAAA;;;;;;;;;;;;;;;AAeG;AAEH,SAAQ,iBAAR,QAAiF,uBAAjF;AACA,SAAQ,YAAR,EAAoC,IAApC,QAA+C,uBAA/C;AAIA,SAAQ,qBAAR,QAAoC,0BAApC;AAEA,OAAO,IAAM,uBAAuB,GAAiB;AACnD,EAAA,UAAU,EAAE,iBADuC;AAEnD,EAAA,WAAW,EAAE,OAFsC;AAGnD,EAAA,UAAU,EAAE,0BAA6B;AAAA,QAA3B,MAA2B,QAA3B,MAA2B;AAAA,QAAnB,KAAmB,QAAnB,KAAmB;AAAA,QAAZ,OAAY,QAAZ,OAAY;AAAA,QAChC,CADgC,GAC3B,MAD2B,CAChC,CADgC;AAAA,QAEhC,UAFgC,GAGnC,KAHmC,CAEhC,UAFgC;AAAA,QAEpB,OAFoB,GAGnC,KAHmC,CAEpB,OAFoB;AAAA,QAEX,GAFW,GAGnC,KAHmC,CAEX,GAFW;AAAA,QAEN,mBAFM,GAGnC,KAHmC,CAEN,mBAFM;AAIvC,QAAM,YAAY,GAAG,OAArB;AAEA,IAAA,IAAI,CAAC,MAAL,CACI,CAAC,CAAC,KAAF,CAAQ,MAAR,KAAmB,CADvB,EAEI;AAAA,2EACI,CAAC,CAAC,KAAF,CAAQ,MADZ;AAAA,KAFJ;AAIA,QAAM,SAAS,GAAqB,CAAC,CAAD,EAAI,CAAJ,CAApC;AACA,IAAA,IAAI,CAAC,MAAL,CACI,YAAY,CAAC,8BAAb,CAA4C,OAA5C,EAAqD,SAArD,CADJ,EAEI;AAAA,aAAM,oFACa,OADb,6BACuC,SADvC,MAAN;AAAA,KAFJ;AAKA,QAAM,QAAQ,GAAG,YAAY,CAAC,iBAAb,CACb,CAAC,CAAC,KADW,EACgC,UADhC,EAC4C,OAD5C,EAEb,SAFa,EAEF,GAFE,CAAjB;;AAhBuC,gCAqBnC,qBAAqB,CAAC,CAAD,EAAI,mBAAJ,EAAyB,QAAzB,EAAmC,YAAnC,CArBc;AAAA;AAAA,QAoBhC,MApBgC;AAAA,QAoBxB,OApBwB;;AAsBvC,WAAO,CAAC,MAAD,EAAS,OAAT,CAAP;AACD;AA1BkD,CAA9C","sourcesContent":["/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {MaxPoolWithArgmax, MaxPoolWithArgmaxAttrs, MaxPoolWithArgmaxInputs} from '@tensorflow/tfjs-core';\nimport {backend_util, KernelConfig, util} from '@tensorflow/tfjs-core';\n\nimport {MathBackendWebGL} from '../backend_webgl';\n\nimport {maxPoolWithArgmaxImpl} from './MaxPoolWithArgmax_impl';\n\nexport const maxPoolWithArgmaxConfig: KernelConfig = {\n  kernelName: MaxPoolWithArgmax,\n  backendName: 'webgl',\n  kernelFunc: ({inputs, attrs, backend}) => {\n    const {x} = inputs as MaxPoolWithArgmaxInputs;\n    const {filterSize, strides, pad, includeBatchInIndex} =\n        attrs as {} as MaxPoolWithArgmaxAttrs;\n    const webglBackend = backend as MathBackendWebGL;\n\n    util.assert(\n        x.shape.length === 4,\n        () => `Error in maxPool: input must be rank 4 but got rank ${\n            x.shape.length}.`);\n    const dilations: [number, number] = [1, 1];\n    util.assert(\n        backend_util.eitherStridesOrDilationsAreOne(strides, dilations),\n        () => 'Error in maxPool: Either strides or dilations must be 1. ' +\n            `Got strides ${strides} and dilations '${dilations}'`);\n\n    const convInfo = backend_util.computePool2DInfo(\n        x.shape as [number, number, number, number], filterSize, strides,\n        dilations, pad);\n\n    const [result, indexes] =\n        maxPoolWithArgmaxImpl(x, includeBatchInIndex, convInfo, webglBackend);\n    return [result, indexes];\n  }\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}