{"id":"diU4","dependencies":[{"name":"/Users/alberttian/f21/playground/frontend/live_video/node_modules/@tensorflow/tfjs-backend-wasm/dist/kernels/GatherV2.js.map","includedInParent":true,"mtime":1631991166467},{"name":"/Users/alberttian/f21/playground/frontend/live_video/package.json","includedInParent":true,"mtime":1633056435183},{"name":"/Users/alberttian/f21/playground/frontend/live_video/.babelrc","includedInParent":true,"mtime":1633056216691},{"name":"/Users/alberttian/f21/playground/frontend/live_video/node_modules/@tensorflow/tfjs-backend-wasm/package.json","includedInParent":true,"mtime":1631991166467},{"name":"@tensorflow/tfjs-core","loc":{"line":17,"column":45},"parent":"/Users/alberttian/f21/playground/frontend/live_video/node_modules/@tensorflow/tfjs-backend-wasm/dist/kernels/GatherV2.js","resolved":"/Users/alberttian/f21/playground/frontend/live_video/node_modules/@tensorflow/tfjs-core/dist/index.js"},{"name":"./Reshape","loc":{"line":18,"column":24},"parent":"/Users/alberttian/f21/playground/frontend/live_video/node_modules/@tensorflow/tfjs-backend-wasm/dist/kernels/GatherV2.js","resolved":"/Users/alberttian/f21/playground/frontend/live_video/node_modules/@tensorflow/tfjs-backend-wasm/dist/kernels/Reshape.js"},{"name":"./types","loc":{"line":19,"column":25},"parent":"/Users/alberttian/f21/playground/frontend/live_video/node_modules/@tensorflow/tfjs-backend-wasm/dist/kernels/GatherV2.js","resolved":"/Users/alberttian/f21/playground/frontend/live_video/node_modules/@tensorflow/tfjs-backend-wasm/dist/kernels/types.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.gatherV2Config=void 0;var e=require(\"@tensorflow/tfjs-core\"),t=require(\"./Reshape\"),a=require(\"./types\");let r;function i(e){r=e.wasm.cwrap(\"Gather\",null,[\"number\",\"number\",\"array\",\"number\",\"number\",\"number\",\"array\",\"number\"])}function s(i){const{backend:s,inputs:n,attrs:p}=i,{x:u,indices:d}=n,{axis:c,batchDims:h}=p,o=e.util.parseAxisParam(c,u.shape)[0],b=e.backend_util.segment_util.collectGatherOpShapeInfo(u,d,o,h),l=(0,t.reshape)({inputs:{x:u},attrs:{shape:[b.batchSize,b.outerSize,b.dimSize,b.sliceSize]},backend:s}),m=e.util.sizeFromShape(d.shape),S=(0,t.reshape)({inputs:{x:d},attrs:{shape:[b.batchSize,m/b.batchSize]},backend:s}),f=[b.batchSize,b.outerSize,m/b.batchSize,b.sliceSize],z=s.makeOutput(f,u.dtype);if(0===e.util.sizeFromShape(u.shape))return z;const y=l.shape.length-1,I=s.dataIdMap.get(l.dataId).id,g=s.dataIdMap.get(S.dataId).id,k=s.dataIdMap.get(z.dataId).id,w=new Uint8Array(new Int32Array(e.util.computeStrides(l.shape)).buffer),x=new Uint8Array(new Int32Array(e.util.computeStrides(f)).buffer);return r(I,a.CppDType[u.dtype],w,y,g,b.batchSize,x,k),s.disposeData(l.dataId),s.disposeData(S.dataId),z.shape=b.outputShape,z}const n={kernelName:e.GatherV2,backendName:\"wasm\",setupFunc:i,kernelFunc:s};exports.gatherV2Config=n;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":7},"generated":{"line":1,"column":0}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":7},"generated":{"line":1,"column":13}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":7},"generated":{"line":1,"column":20}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":7},"generated":{"line":1,"column":35}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":7},"generated":{"line":1,"column":43}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":7},"generated":{"line":1,"column":56}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":7},"generated":{"line":1,"column":57}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":7},"generated":{"line":1,"column":64}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":7},"generated":{"line":1,"column":68}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":7},"generated":{"line":1,"column":76}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":7},"generated":{"line":1,"column":96}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":98}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":102}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":104}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":112}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":137}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":139}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":147}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":160}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":162}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":170}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":181}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":25,"column":4},"generated":{"line":1,"column":185}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":187}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":30,"column":9},"generated":{"line":1,"column":196}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":30,"column":15},"generated":{"line":1,"column":198}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":31,"column":2},"generated":{"line":1,"column":201}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":31,"column":15},"generated":{"line":1,"column":203}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":31,"column":23},"generated":{"line":1,"column":205}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":31,"column":28},"generated":{"line":1,"column":210}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":31,"column":34},"generated":{"line":1,"column":216}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":31,"column":44},"generated":{"line":1,"column":225}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":31,"column":59},"generated":{"line":1,"column":230}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":32,"column":4},"generated":{"line":1,"column":231}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":33,"column":4},"generated":{"line":1,"column":240}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":34,"column":4},"generated":{"line":1,"column":249}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":35,"column":4},"generated":{"line":1,"column":257}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":36,"column":4},"generated":{"line":1,"column":266}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":1,"column":275}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":38,"column":4},"generated":{"line":1,"column":284}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":39,"column":4},"generated":{"line":1,"column":292}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":43,"column":0},"generated":{"line":1,"column":303}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":43,"column":9},"generated":{"line":1,"column":312}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":44,"column":4},"generated":{"line":1,"column":314}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":1,"column":317}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":1,"column":323}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":46,"column":9},"generated":{"line":1,"column":331}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":1,"column":333}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":46,"column":18},"generated":{"line":1,"column":340}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":1,"column":342}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":46,"column":26},"generated":{"line":1,"column":348}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":46,"column":35},"generated":{"line":1,"column":351}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":47,"column":8},"generated":{"line":1,"column":354}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":47,"column":9},"generated":{"line":1,"column":356}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":47,"column":8},"generated":{"line":1,"column":358}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":47,"column":12},"generated":{"line":1,"column":366}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":47,"column":23},"generated":{"line":1,"column":369}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":48,"column":8},"generated":{"line":1,"column":372}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":48,"column":9},"generated":{"line":1,"column":377}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":48,"column":8},"generated":{"line":1,"column":379}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":48,"column":15},"generated":{"line":1,"column":389}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":48,"column":28},"generated":{"line":1,"column":392}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":50,"column":8},"generated":{"line":1,"column":394}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":50,"column":21},"generated":{"line":1,"column":396}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":50,"column":26},"generated":{"line":1,"column":398}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":50,"column":26},"generated":{"line":1,"column":403}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":50,"column":41},"generated":{"line":1,"column":418}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":50,"column":47},"generated":{"line":1,"column":420}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":50,"column":49},"generated":{"line":1,"column":422}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":50,"column":56},"generated":{"line":1,"column":429}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":51,"column":8},"generated":{"line":1,"column":432}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":51,"column":20},"generated":{"line":1,"column":434}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":51,"column":33},"generated":{"line":1,"column":436}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":51,"column":33},"generated":{"line":1,"column":449}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":51,"column":46},"generated":{"line":1,"column":462}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":52,"column":6},"generated":{"line":1,"column":487}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":52,"column":19},"generated":{"line":1,"column":489}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":52,"column":38},"generated":{"line":1,"column":491}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":52,"column":50},"generated":{"line":1,"column":493}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":54,"column":8},"generated":{"line":1,"column":496}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":54,"column":19},"generated":{"line":1,"column":499}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":54,"column":27},"generated":{"line":1,"column":501}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":54,"column":27},"generated":{"line":1,"column":503}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":54,"column":27},"generated":{"line":1,"column":512}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":55,"column":4},"generated":{"line":1,"column":513}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":55,"column":12},"generated":{"line":1,"column":520}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":55,"column":13},"generated":{"line":1,"column":521}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":55,"column":13},"generated":{"line":1,"column":523}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":56,"column":4},"generated":{"line":1,"column":526}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":56,"column":11},"generated":{"line":1,"column":532}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":57,"column":6},"generated":{"line":1,"column":533}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":57,"column":13},"generated":{"line":1,"column":539}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":58,"column":8},"generated":{"line":1,"column":540}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":58,"column":18},"generated":{"line":1,"column":542}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":58,"column":29},"generated":{"line":1,"column":552}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":58,"column":39},"generated":{"line":1,"column":554}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":58,"column":50},"generated":{"line":1,"column":564}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":58,"column":60},"generated":{"line":1,"column":566}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":59,"column":8},"generated":{"line":1,"column":574}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":59,"column":18},"generated":{"line":1,"column":576}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":62,"column":4},"generated":{"line":1,"column":588}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":62,"column":4},"generated":{"line":1,"column":596}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":64,"column":8},"generated":{"line":1,"column":600}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":64,"column":22},"generated":{"line":1,"column":602}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":64,"column":27},"generated":{"line":1,"column":604}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":64,"column":27},"generated":{"line":1,"column":609}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":64,"column":41},"generated":{"line":1,"column":623}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":64,"column":49},"generated":{"line":1,"column":625}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":65,"column":8},"generated":{"line":1,"column":632}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":65,"column":23},"generated":{"line":1,"column":635}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":65,"column":31},"generated":{"line":1,"column":637}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":65,"column":31},"generated":{"line":1,"column":639}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":65,"column":31},"generated":{"line":1,"column":648}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":66,"column":4},"generated":{"line":1,"column":649}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":66,"column":12},"generated":{"line":1,"column":656}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":66,"column":13},"generated":{"line":1,"column":657}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":66,"column":16},"generated":{"line":1,"column":659}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":67,"column":4},"generated":{"line":1,"column":662}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":67,"column":11},"generated":{"line":1,"column":668}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":67,"column":12},"generated":{"line":1,"column":669}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":67,"column":19},"generated":{"line":1,"column":675}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":67,"column":20},"generated":{"line":1,"column":676}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":67,"column":30},"generated":{"line":1,"column":678}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":67,"column":41},"generated":{"line":1,"column":688}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":67,"column":55},"generated":{"line":1,"column":690}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":67,"column":65},"generated":{"line":1,"column":692}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":68,"column":4},"generated":{"line":1,"column":704}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":68,"column":4},"generated":{"line":1,"column":712}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":70,"column":8},"generated":{"line":1,"column":716}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":70,"column":29},"generated":{"line":1,"column":718}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":71,"column":4},"generated":{"line":1,"column":719}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":71,"column":14},"generated":{"line":1,"column":721}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":71,"column":25},"generated":{"line":1,"column":731}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":71,"column":35},"generated":{"line":1,"column":733}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":71,"column":46},"generated":{"line":1,"column":743}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":71,"column":60},"generated":{"line":1,"column":745}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":71,"column":70},"generated":{"line":1,"column":747}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":72,"column":4},"generated":{"line":1,"column":757}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":72,"column":14},"generated":{"line":1,"column":759}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":75,"column":8},"generated":{"line":1,"column":770}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":75,"column":14},"generated":{"line":1,"column":772}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":75,"column":22},"generated":{"line":1,"column":774}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":75,"column":33},"generated":{"line":1,"column":785}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":75,"column":53},"generated":{"line":1,"column":787}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":75,"column":55},"generated":{"line":1,"column":789}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":76,"column":6},"generated":{"line":1,"column":796}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":76,"column":38},"generated":{"line":1,"column":799}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":76,"column":6},"generated":{"line":1,"column":803}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":76,"column":11},"generated":{"line":1,"column":805}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":76,"column":11},"generated":{"line":1,"column":810}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":76,"column":25},"generated":{"line":1,"column":824}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":76,"column":27},"generated":{"line":1,"column":826}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":77,"column":11},"generated":{"line":1,"column":833}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":77,"column":11},"generated":{"line":1,"column":840}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":1,"column":842}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":1,"column":848}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":79,"column":22},"generated":{"line":1,"column":850}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":79,"column":31},"generated":{"line":1,"column":852}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":79,"column":37},"generated":{"line":1,"column":858}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":79,"column":46},"generated":{"line":1,"column":865}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":82,"column":8},"generated":{"line":1,"column":867}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":81,"column":16},"generated":{"line":1,"column":869}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":81,"column":24},"generated":{"line":1,"column":871}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":81,"column":34},"generated":{"line":1,"column":881}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":81,"column":38},"generated":{"line":1,"column":885}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":81,"column":47},"generated":{"line":1,"column":887}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":82,"column":20},"generated":{"line":1,"column":895}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":85,"column":8},"generated":{"line":1,"column":898}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":84,"column":22},"generated":{"line":1,"column":900}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":84,"column":30},"generated":{"line":1,"column":902}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":84,"column":40},"generated":{"line":1,"column":912}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":84,"column":44},"generated":{"line":1,"column":916}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":84,"column":57},"generated":{"line":1,"column":918}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":85,"column":32},"generated":{"line":1,"column":926}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":87,"column":8},"generated":{"line":1,"column":929}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":87,"column":16},"generated":{"line":1,"column":931}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":87,"column":24},"generated":{"line":1,"column":933}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":87,"column":34},"generated":{"line":1,"column":943}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":87,"column":38},"generated":{"line":1,"column":947}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":87,"column":42},"generated":{"line":1,"column":949}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":87,"column":50},"generated":{"line":1,"column":957}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":89,"column":8},"generated":{"line":1,"column":960}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":89,"column":24},"generated":{"line":1,"column":962}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":89,"column":28},"generated":{"line":1,"column":966}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":90,"column":6},"generated":{"line":1,"column":977}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":90,"column":10},"generated":{"line":1,"column":981}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":90,"column":21},"generated":{"line":1,"column":992}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":90,"column":26},"generated":{"line":1,"column":994}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":90,"column":26},"generated":{"line":1,"column":999}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":90,"column":41},"generated":{"line":1,"column":1014}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":90,"column":50},"generated":{"line":1,"column":1016}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":90,"column":58},"generated":{"line":1,"column":1024}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":91,"column":8},"generated":{"line":1,"column":1032}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":91,"column":26},"generated":{"line":1,"column":1034}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":91,"column":30},"generated":{"line":1,"column":1038}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":92,"column":6},"generated":{"line":1,"column":1049}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":92,"column":10},"generated":{"line":1,"column":1053}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":92,"column":21},"generated":{"line":1,"column":1064}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":92,"column":26},"generated":{"line":1,"column":1066}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":92,"column":26},"generated":{"line":1,"column":1071}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":92,"column":41},"generated":{"line":1,"column":1086}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":92,"column":62},"generated":{"line":1,"column":1090}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":103,"column":9},"generated":{"line":1,"column":1098}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":94,"column":2},"generated":{"line":1,"column":1105}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":95,"column":6},"generated":{"line":1,"column":1107}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":95,"column":11},"generated":{"line":1,"column":1109}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":1,"column":1111}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":1,"column":1120}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":95,"column":22},"generated":{"line":1,"column":1122}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":95,"column":30},"generated":{"line":1,"column":1129}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":95,"column":45},"generated":{"line":1,"column":1131}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":95,"column":58},"generated":{"line":1,"column":1133}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":96,"column":6},"generated":{"line":1,"column":1135}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":96,"column":16},"generated":{"line":1,"column":1137}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":96,"column":27},"generated":{"line":1,"column":1147}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":96,"column":44},"generated":{"line":1,"column":1149}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":98,"column":2},"generated":{"line":1,"column":1152}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":98,"column":10},"generated":{"line":1,"column":1154}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":98,"column":22},"generated":{"line":1,"column":1166}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":98,"column":31},"generated":{"line":1,"column":1168}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":99,"column":2},"generated":{"line":1,"column":1176}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":99,"column":10},"generated":{"line":1,"column":1178}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":99,"column":22},"generated":{"line":1,"column":1190}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":99,"column":35},"generated":{"line":1,"column":1192}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":102,"column":2},"generated":{"line":1,"column":1200}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":102,"column":6},"generated":{"line":1,"column":1202}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":102,"column":14},"generated":{"line":1,"column":1208}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":102,"column":24},"generated":{"line":1,"column":1210}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":103,"column":9},"generated":{"line":1,"column":1222}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":7},"generated":{"line":1,"column":1224}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":13},"generated":{"line":1,"column":1230}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":44},"generated":{"line":1,"column":1232}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":107,"column":2},"generated":{"line":1,"column":1233}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":107,"column":14},"generated":{"line":1,"column":1244}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":44},"generated":{"line":1,"column":1246}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":108,"column":2},"generated":{"line":1,"column":1255}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":108,"column":15},"generated":{"line":1,"column":1267}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":109,"column":2},"generated":{"line":1,"column":1274}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":109,"column":13},"generated":{"line":1,"column":1284}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":110,"column":2},"generated":{"line":1,"column":1286}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":110,"column":14},"generated":{"line":1,"column":1297}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":7},"generated":{"line":1,"column":1300}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":7},"generated":{"line":1,"column":1308}},{"source":"../../src/kernels/GatherV2.ts","name":null,"original":{"line":106,"column":7},"generated":{"line":1,"column":1323}}],"sources":{"../../src/kernels/GatherV2.ts":"/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, GatherV2, GatherV2Attrs, GatherV2Inputs, KernelConfig, KernelFunc, Tensor, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {reshape} from './Reshape';\nimport {CppDType} from './types';\n\nlet wasmGather: (\n    xId: number, dtype: CppDType, xStrides: Uint8Array, stridesSize: number,\n    indicesId: number, batchSize: number, outStrides: Uint8Array,\n    outId: number) => void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmGather = backend.wasm.cwrap('Gather', null /*void*/, [\n    'number',  // xId\n    'number',  // dtype\n    'array',   // xStrides\n    'number',  // stridesSize\n    'number',  // indicesId\n    'number',  // batchSize\n    'array',   // outStrides\n    'number'   // outId\n  ]);\n}\n\nfunction gatherV2(\n    args: {backend: BackendWasm, inputs: GatherV2Inputs, attrs: GatherV2Attrs}):\n    TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {x, indices} = inputs;\n  const {axis, batchDims} = attrs;\n\n  const parsedAxis = util.parseAxisParam(axis, x.shape)[0];\n  const shapeInfo = backend_util.segment_util.collectGatherOpShapeInfo(\n      x as Tensor, indices as Tensor, parsedAxis, batchDims);\n\n  const flattenX = reshape({\n    inputs: {x},\n    attrs: {\n      shape: [\n        shapeInfo.batchSize, shapeInfo.outerSize, shapeInfo.dimSize,\n        shapeInfo.sliceSize\n      ]\n    },\n    backend\n  });\n  const indicesSize = util.sizeFromShape(indices.shape);\n  const flattenIndex = reshape({\n    inputs: {x: indices},\n    attrs: {shape: [shapeInfo.batchSize, indicesSize / shapeInfo.batchSize]},\n    backend\n  });\n  const flattenOutputShape = [\n    shapeInfo.batchSize, shapeInfo.outerSize, indicesSize / shapeInfo.batchSize,\n    shapeInfo.sliceSize\n  ];\n\n  const out = backend.makeOutput(flattenOutputShape, x.dtype);\n  if (util.sizeFromShape(x.shape) === 0) {\n    return out;\n  }\n  const stridesSize = flattenX.shape.length - 1;\n\n  const xData = backend.dataIdMap.get(flattenX.dataId);\n  const xId = xData.id;\n\n  const indicesData = backend.dataIdMap.get(flattenIndex.dataId);\n  const indicesId = indicesData.id;\n\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  const xStridesBytes = new Uint8Array(\n      new Int32Array(util.computeStrides(flattenX.shape)).buffer);\n  const outStridesBytes = new Uint8Array(\n      new Int32Array(util.computeStrides(flattenOutputShape)).buffer);\n\n  wasmGather(\n      xId, CppDType[x.dtype], xStridesBytes, stridesSize, indicesId,\n      shapeInfo.batchSize, outStridesBytes, outId);\n\n  backend.disposeData(flattenX.dataId);\n  backend.disposeData(flattenIndex.dataId);\n\n  // reshape\n  out.shape = shapeInfo.outputShape;\n  return out;\n}\n\nexport const gatherV2Config: KernelConfig = {\n  kernelName: GatherV2,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: gatherV2 as {} as KernelFunc\n};\n"},"lineCount":null}},"error":null,"hash":"95fdf8fe363be3db145ecc49123959bf","cacheData":{"env":{}}}