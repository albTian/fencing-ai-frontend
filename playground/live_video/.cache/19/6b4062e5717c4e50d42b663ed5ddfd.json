{"id":"K4kf","dependencies":[{"name":"/Users/alberttian/f21/playground/frontend/live_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/reshape_packed_gpu.js.map","includedInParent":true,"mtime":1631991247369},{"name":"/Users/alberttian/f21/playground/frontend/live_video/package.json","includedInParent":true,"mtime":1633056435183},{"name":"/Users/alberttian/f21/playground/frontend/live_video/.babelrc","includedInParent":true,"mtime":1633056216691},{"name":"/Users/alberttian/f21/playground/frontend/live_video/node_modules/@tensorflow/tfjs-backend-webgl/package.json","includedInParent":true,"mtime":1631991247369},{"name":"./gpgpu_math","loc":{"line":17,"column":33},"parent":"/Users/alberttian/f21/playground/frontend/live_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/reshape_packed_gpu.js","resolved":"/Users/alberttian/f21/playground/frontend/live_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/gpgpu_math.js"},{"name":"./shader_compiler_util","loc":{"line":18,"column":29},"parent":"/Users/alberttian/f21/playground/frontend/live_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/reshape_packed_gpu.js","resolved":"/Users/alberttian/f21/playground/frontend/live_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/shader_compiler_util.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.ReshapePackedProgram=void 0;var e=require(\"./gpgpu_math\"),t=r(require(\"./shader_compiler_util\"));function n(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function r(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(\"default\"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}class i{constructor(n,r){this.variableNames=[\"A\"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:\"inputShape\",type:\"ivec3\"}],this.outputShape=n,this.enableShapeUniforms=(0,e.useShapeUniforms)(this.outputShape.length);let i=\"\";for(let e=0;e<4;e++){let t=\"thisRC = rc;\";e%2==1&&(t+=\"thisRC.z += 1;\"),e>1&&(t+=\"thisRC.y += 1;\"),i+=`\\n        ${t}\\n        ${e>0?\"if(thisRC.y < rows && thisRC.z < cols){\":\"\"}\\n          int flatIndex = getFlatIndex(thisRC);\\n\\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\\n\\n          result[${e}] =\\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\\n        ${e>0?\"}\":\"\"}\\n      `}this.userCode=`\\n      ${o(r,this.enableShapeUniforms)}\\n      ${this.enableShapeUniforms?t.getFlatIndexFrom3DOutput():t.getFlatIndexFrom3D(n)}\\n\\n      void main() {\\n        ivec3 rc = getOutputCoords();\\n\\n        vec4 result = vec4(0.);\\n\\n        ivec3 thisRC;\\n        int rows = ${this.enableShapeUniforms?\"outShape[1]\":n[1]};\\n        int cols = ${this.enableShapeUniforms?\"outShape[2]\":n[2]};\\n\\n        ${i}\\n\\n        setOutput(result);\\n      }\\n    `}}function o(e,n){return`\\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\\n      ${n?t.getLogicalCoordinatesFromFlatIndexByUniform([\"r\",\"c\",\"d\"],\"inputShape\"):t.getLogicalCoordinatesFromFlatIndex([\"r\",\"c\",\"d\"],e)}\\n      return ivec3(r, c, d);\\n    }\\n  `}exports.ReshapePackedProgram=i;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":0}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":13}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":20}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":35}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":43}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":56}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":57}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":64}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":68}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":76}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":102}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":104}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":108}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":110}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":118}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":134}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":136}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":138}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":146}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":173}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":182}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":184}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":187}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":190}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":209}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":217}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":224}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":229}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":233}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":235}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":239}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":247}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":249}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":253}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":261}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":268}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":270}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":279}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":282}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":289}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":291}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":293}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":297}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":300}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":309}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":311}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":313}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":316}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":320}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":323}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":326}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":328}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":339}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":346}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":348}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":351}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":358}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":361}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":378}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":381}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":400}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":402}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":408}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":409}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":417}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":420}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":424}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":426}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":428}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":431}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":434}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":437}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":439}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":443}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":446}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":453}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":455}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":459}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":462}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":466}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":468}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":471}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":473}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":480}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":496}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":503}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":528}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":532}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":536}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":541}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":543}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":546}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":558}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":561}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":568}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":578}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":593}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":598}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":600}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":603}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":604}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":608}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":610}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":612}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":619}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":644}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":646}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":649}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":654}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":658}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":660}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":665}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":667}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":672}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":679}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":694}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":696}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":698}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":701}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":703}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":706}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":708}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":711}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":718}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":720}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":728}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":730}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":733}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":735}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":739}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":741}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":744}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":21,"column":6},"generated":{"line":1,"column":746}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":21,"column":13},"generated":{"line":1,"column":752}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":30,"column":2},"generated":{"line":1,"column":754}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":30,"column":14},"generated":{"line":1,"column":766}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":30,"column":53},"generated":{"line":1,"column":768}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":1,"column":771}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":1,"column":776}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":22,"column":18},"generated":{"line":1,"column":790}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":22,"column":19},"generated":{"line":1,"column":791}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":23,"column":2},"generated":{"line":1,"column":796}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":23,"column":2},"generated":{"line":1,"column":801}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":23,"column":17},"generated":{"line":1,"column":815}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":24,"column":2},"generated":{"line":1,"column":817}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":24,"column":2},"generated":{"line":1,"column":822}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":24,"column":17},"generated":{"line":1,"column":836}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":28,"column":2},"generated":{"line":1,"column":838}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":28,"column":2},"generated":{"line":1,"column":843}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":28,"column":19},"generated":{"line":1,"column":858}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":28,"column":20},"generated":{"line":1,"column":859}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":28,"column":21},"generated":{"line":1,"column":860}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":28,"column":27},"generated":{"line":1,"column":865}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":28,"column":41},"generated":{"line":1,"column":878}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":28,"column":47},"generated":{"line":1,"column":883}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":33,"column":9},"generated":{"line":1,"column":893}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":33,"column":9},"generated":{"line":1,"column":898}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":33,"column":23},"generated":{"line":1,"column":910}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":34,"column":9},"generated":{"line":1,"column":912}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":34,"column":9},"generated":{"line":1,"column":917}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":34,"column":31},"generated":{"line":1,"column":938}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":34,"column":48},"generated":{"line":1,"column":940}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":34,"column":48},"generated":{"line":1,"column":942}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":34,"column":48},"generated":{"line":1,"column":960}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":34,"column":53},"generated":{"line":1,"column":965}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":34,"column":65},"generated":{"line":1,"column":977}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":36,"column":8},"generated":{"line":1,"column":985}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":36,"column":8},"generated":{"line":1,"column":989}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":36,"column":19},"generated":{"line":1,"column":991}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":37,"column":9},"generated":{"line":1,"column":994}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":37,"column":9},"generated":{"line":1,"column":998}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":37,"column":13},"generated":{"line":1,"column":1002}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":37,"column":17},"generated":{"line":1,"column":1004}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":37,"column":20},"generated":{"line":1,"column":1006}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":37,"column":24},"generated":{"line":1,"column":1008}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":37,"column":27},"generated":{"line":1,"column":1010}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":37,"column":32},"generated":{"line":1,"column":1014}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":38,"column":10},"generated":{"line":1,"column":1015}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":38,"column":10},"generated":{"line":1,"column":1019}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":38,"column":19},"generated":{"line":1,"column":1021}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":39,"column":10},"generated":{"line":1,"column":1036}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":39,"column":14},"generated":{"line":1,"column":1038}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":39,"column":20},"generated":{"line":1,"column":1041}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":40,"column":8},"generated":{"line":1,"column":1045}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":40,"column":18},"generated":{"line":1,"column":1048}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":42,"column":10},"generated":{"line":1,"column":1066}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":42,"column":14},"generated":{"line":1,"column":1068}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":1,"column":1072}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":43,"column":18},"generated":{"line":1,"column":1075}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":46,"column":6},"generated":{"line":1,"column":1093}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":47,"column":10},"generated":{"line":1,"column":1109}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":48,"column":10},"generated":{"line":1,"column":1123}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":48,"column":14},"generated":{"line":1,"column":1125}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":48,"column":18},"generated":{"line":1,"column":1127}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":48,"column":62},"generated":{"line":1,"column":1169}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":54,"column":19},"generated":{"line":1,"column":1394}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":56,"column":10},"generated":{"line":1,"column":1493}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":56,"column":14},"generated":{"line":1,"column":1495}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":56,"column":18},"generated":{"line":1,"column":1497}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":56,"column":24},"generated":{"line":1,"column":1501}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":60,"column":9},"generated":{"line":1,"column":1514}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":60,"column":9},"generated":{"line":1,"column":1519}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":61,"column":8},"generated":{"line":1,"column":1539}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":61,"column":31},"generated":{"line":1,"column":1541}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":61,"column":43},"generated":{"line":1,"column":1543}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":61,"column":48},"generated":{"line":1,"column":1548}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":63,"column":8},"generated":{"line":1,"column":1579}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":63,"column":13},"generated":{"line":1,"column":1584}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":63,"column":35},"generated":{"line":1,"column":1604}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":63,"column":47},"generated":{"line":1,"column":1606}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":64,"column":35},"generated":{"line":1,"column":1633}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":64,"column":47},"generated":{"line":1,"column":1635}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":64,"column":66},"generated":{"line":1,"column":1654}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":72,"column":21},"generated":{"line":1,"column":1802}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":72,"column":26},"generated":{"line":1,"column":1807}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":72,"column":48},"generated":{"line":1,"column":1827}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":72,"column":64},"generated":{"line":1,"column":1841}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":72,"column":76},"generated":{"line":1,"column":1843}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":73,"column":21},"generated":{"line":1,"column":1870}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":73,"column":26},"generated":{"line":1,"column":1875}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":73,"column":48},"generated":{"line":1,"column":1895}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":73,"column":64},"generated":{"line":1,"column":1909}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":73,"column":76},"generated":{"line":1,"column":1911}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":75,"column":10},"generated":{"line":1,"column":1929}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":83,"column":0},"generated":{"line":1,"column":1979}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":83,"column":9},"generated":{"line":1,"column":1988}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":84,"column":4},"generated":{"line":1,"column":1990}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":84,"column":37},"generated":{"line":1,"column":1992}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":90,"column":9},"generated":{"line":1,"column":1995}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":85,"column":33},"generated":{"line":1,"column":2069}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":86,"column":6},"generated":{"line":1,"column":2071}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":86,"column":18},"generated":{"line":1,"column":2073}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":87,"column":10},"generated":{"line":1,"column":2117}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":87,"column":11},"generated":{"line":1,"column":2118}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":87,"column":16},"generated":{"line":1,"column":2122}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":87,"column":21},"generated":{"line":1,"column":2126}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":87,"column":27},"generated":{"line":1,"column":2131}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":88,"column":6},"generated":{"line":1,"column":2145}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":88,"column":18},"generated":{"line":1,"column":2147}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":88,"column":53},"generated":{"line":1,"column":2182}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":88,"column":54},"generated":{"line":1,"column":2183}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":88,"column":59},"generated":{"line":1,"column":2187}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":88,"column":64},"generated":{"line":1,"column":2191}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":88,"column":70},"generated":{"line":1,"column":2196}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":2242}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":2250}},{"source":"../src/reshape_packed_gpu.ts","name":null,"original":{"line":96,"column":1},"generated":{"line":1,"column":2271}}],"sources":{"../src/reshape_packed_gpu.ts":"/**\n * @license\n * Copyright 2018 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {GPGPUProgram, useShapeUniforms} from './gpgpu_math';\nimport * as shader_util from './shader_compiler_util';\n\nexport class ReshapePackedProgram implements GPGPUProgram {\n  variableNames = ['A'];\n  packedInputs = true;\n  packedOutput = true;\n  outputShape: number[];\n  userCode: string;\n  enableShapeUniforms: boolean;\n  customUniforms = [{name: 'inputShape', type: 'ivec3' as const }];\n\n  constructor(outputShape: [number, number, number], inputShape: [\n    number, number, number\n  ]) {\n    this.outputShape = outputShape;\n    this.enableShapeUniforms = useShapeUniforms(this.outputShape.length);\n\n    let mainLoop = ``;\n    for (let i = 0; i < 4; i++) {\n      let thisRC = `thisRC = rc;`;\n      if (i % 2 === 1) {\n        thisRC += `thisRC.z += 1;`;\n      }\n      if (i > 1) {\n        thisRC += `thisRC.y += 1;`;\n      }\n\n      mainLoop += `\n        ${thisRC}\n        ${i > 0 ? `if(thisRC.y < rows && thisRC.z < cols){` : ''}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${i}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${i > 0 ? '}' : ''}\n      `;\n    }\n\n    this.userCode = `\n      ${getReshapedInputCoords(inputShape, this.enableShapeUniforms)}\n      ${\n        this.enableShapeUniforms ? shader_util.getFlatIndexFrom3DOutput() :\n                                   shader_util.getFlatIndexFrom3D(outputShape)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms ? 'outShape[1]' : outputShape[1]};\n        int cols = ${this.enableShapeUniforms ? 'outShape[2]' : outputShape[2]};\n\n        ${mainLoop}\n\n        setOutput(result);\n      }\n    `;\n  }\n}\n\nfunction getReshapedInputCoords(\n    shape: [number, number, number], enableShapeUniforms: boolean): string {\n  const coordsFromIndexSnippet = enableShapeUniforms ?\n      shader_util.getLogicalCoordinatesFromFlatIndexByUniform(\n          ['r', 'c', 'd'], 'inputShape') :\n      shader_util.getLogicalCoordinatesFromFlatIndex(['r', 'c', 'd'], shape);\n\n  return `\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${coordsFromIndexSnippet}\n      return ivec3(r, c, d);\n    }\n  `;\n}\n"},"lineCount":null}},"error":null,"hash":"5d70788155aaf888e4e17d118bd77f6b","cacheData":{"env":{}}}